{#-
Jinja variables file for the infrastructure.salt formula
Copyright (C) 2024 Georg Pfuetzenreuter <georg.pfuetzenreuter@suse.com>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
-#}

{%- load_yaml as defaults -%}
git:
  branch: production
  user: cloneboy
  directory: /srv/salt-git
  formulas:
    directory: /srv/formulas
{%- endload -%}

{%- set config  = salt.pillar.get('infrastructure:salt', default=defaults, merge=True, merge_nested_lists=False) -%}
{%- set git = config.get('git', {}) -%}
{%- set formulas = git.get('formulas', {}) -%}
